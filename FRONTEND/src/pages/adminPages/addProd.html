<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Product</title>
</head>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Roboto', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
        color: #333;
    }

    h1 {
        text-align: center;
        color: #444;
        margin-top: 20px;
        font-weight: 700;
    }

    form {
        background-color: #ffffff;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 500px;
        margin: 40px auto;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: #555;
    }

    input, textarea, button {
        width: 100%;
        padding: 12px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 6px;
        box-sizing: border-box;
        font-size: 16px;
    }

    input:focus, textarea:focus {
        border-color: #007BFF;
        outline: none;
        box-shadow: 0 0 4px rgba(0, 123, 255, 0.2);
    }

    button {
        background-color: #007BFF;
        color: #fff;
        border: none;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #0056b3;
    }

    @media (max-width: 600px) {
        form {
            padding: 20px;
        }

        input, textarea, button {
            font-size: 14px;
        }
    }
</style>

<body>
    <h1>Add a New Product</h1>
    <form id="addProductForm">
        <label for="productName">Product Name:</label>
        <input type="text" id="productName" name="productName" required>

        <label for="productPrice">Product Price:</label>
        <input type="number" id="productPrice" name="price" step="0.01" required>

        <label for="productDescription">Product Description:</label>
        <textarea id="productDescription" name="description" required></textarea>

        <label for="productCategory">Product Category:</label>
        <input type="text" id="productCategory" name="categoryName" required>

        <label for="productImgPath">Image Path (URL):</label>
        <input type="url" id="productImgPath" name="image_path" required>

        <label for="productPromo">Promo (%):</label>
        <input type="number" id="productPromo" name="promo" min="0" max="100" required>
        
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" min="1" required>

        <button type="submit">Add Product</button>
    </form>

    <script>
       document.getElementById('addProductForm').addEventListener('submit', async (event) => {
    event.preventDefault();

    const token = localStorage.getItem('token');
    if (!token) {
        window.location.href = '/login.html';
        return;
    }

    const productData = {
        productName: document.getElementById('productName').value,
        price: parseFloat(document.getElementById('productPrice').value),
        description: document.getElementById('productDescription').value,
        categoryName: document.getElementById('productCategory').value,
        img_path: document.getElementById('productImgPath').value,
        promo: parseInt(document.getElementById('productPromo').value),
        quantity: parseInt(document.getElementById('quantity').value)
    };

    try {
        const response = await fetch('http://localhost:5000/addProduct', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify(productData)
        });

        const result = await response.json();
        
        if (response.ok) {
            alert('Product added successfully!');
            document.getElementById('addProductForm').reset();
        } else {
            alert(`Error: ${result.message || result.error || 'Failed to add product'}`);
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Network error - please try again');
    }
});
    </script>
</body>
</html>